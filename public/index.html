<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WTUG - Ekran Paylaşım Uygulaması</title>
    <link rel="icon" type="image/svg+xml" href="img/logo.svg">
    <!-- Modern font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: {
                            50: '#eef2ff',
                            100: '#e0e7ff',
                            200: '#c7d2fe',
                            300: '#a5b4fc',
                            400: '#818cf8',
                            500: '#6366f1',
                            600: '#4f46e5',
                            700: '#4338ca',
                            800: '#3730a3',
                            900: '#312e81',
                            950: '#1e1b4b',
                        }
                    },
                    fontFamily: {
                        sans: ['Poppins', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/style.css">
    <style>
        /* Modal Animations */
        .modal-overlay {
            opacity: 0;
            transition: opacity 0.3s ease-in-out;
        }
        
        .modal-overlay.show {
            opacity: 1;
        }
        
        .modal-content {
            transform: scale(0.7);
            opacity: 0;
            transition: all 0.3s ease-in-out;
        }
        
        .modal-content.show {
            transform: scale(1);
            opacity: 1;
        }

        /* Loading Animation */
        .loading-screen {
            animation: fadeInOut 0.5s ease-in-out;
        }

        .loading-icon {
            width: 80px;
            height: 80px;
            border: 4px solid rgba(255, 255, 255, 0.1);
            border-left-color: #6366f1;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        .loading-pulse {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: #6366f1;
            animation: pulse 1.5s ease-in-out infinite;
            position: absolute;
            opacity: 0.2;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        @keyframes pulse {
            0% {
                transform: scale(0.8);
                opacity: 0.5;
            }
            50% {
                transform: scale(1.2);
                opacity: 0.2;
            }
            100% {
                transform: scale(0.8);
                opacity: 0.5;
            }
        }

        @keyframes fadeInOut {
            0% {
                opacity: 0;
            }
            100% {
                opacity: 1;
            }
        }

        .loading-text span {
            display: inline-block;
            animation: bounce 1.5s infinite;
        }

        .loading-text span:nth-child(2) { animation-delay: 0.1s; }
        .loading-text span:nth-child(3) { animation-delay: 0.2s; }
        .loading-text span:nth-child(4) { animation-delay: 0.3s; }
        .loading-text span:nth-child(5) { animation-delay: 0.4s; }
        .loading-text span:nth-child(6) { animation-delay: 0.5s; }
        .loading-text span:nth-child(7) { animation-delay: 0.6s; }
        .loading-text span:nth-child(8) { animation-delay: 0.7s; }
        .loading-text span:nth-child(9) { animation-delay: 0.8s; }
        .loading-text span:nth-child(10) { animation-delay: 0.9s; }
        .loading-text span:nth-child(11) { animation-delay: 1.0s; }
        .loading-text span:nth-child(12) { animation-delay: 1.1s; }
        .loading-text span:nth-child(13) { animation-delay: 1.2s; }
        .loading-text span:nth-child(14) { animation-delay: 1.3s; }
        .loading-text span:nth-child(15) { animation-delay: 1.4s; }
        .loading-text span:nth-child(16) { animation-delay: 1.5s; }
        .loading-text span:nth-child(17) { animation-delay: 1.6s; }
        .loading-text span:nth-child(18) { animation-delay: 1.7s; }
        .loading-text span:nth-child(19) { animation-delay: 1.8s; }
        .loading-text span:nth-child(20) { animation-delay: 1.9s; }

        @keyframes bounce {
            0%, 100% {
                transform: translateY(0);
            }
            50% {
                transform: translateY(-10px);
            }
        }

        /* Medya kontrol butonları */
        .control-buttons button {
            margin: 0 5px;
            padding: 8px 12px;
            border-radius: 50%;
            background-color: #2d3748;
            border: none;
            color: #fff;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .control-buttons button:hover {
            background-color: #4a5568;
        }
        
        .control-buttons button.active {
            background-color: #48bb78;
        }
        
        .control-buttons button.active:hover {
            background-color: #38a169;
        }
        
        /* Medya göstergeleri */
        .audio-indicator,
        .video-indicator {
            display: none;
            margin-left: 5px;
            color: #48bb78;
        }
        
        /* Emoji picker container */
        .emoji-picker-container {
            position: relative;
            display: inline-block;
        }

        #emoji-button {
            background: none;
            border: none;
            font-size: 1.5em;
            cursor: pointer;
            padding: 5px 10px;
            color: #718096;
            transition: color 0.3s ease;
            outline: none;
        }

        #emoji-button:hover {
            color: #4a5568;
        }

        .picmo__popupContainer {
            position: absolute;
            bottom: 100%;
            left: 0;
            margin-bottom: 10px;
        }

        /* Chat input container */
        .chat-input-container {
            display: flex;
            align-items: center;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            padding: 8px;
            margin-top: 10px;
        }

        #message-input {
            flex: 1;
            background: transparent;
            border: none;
            color: white;
            padding: 8px;
            outline: none;
            margin-right: 8px;
        }

        #message-input::placeholder {
            color: #718096;
        }

        .send-button {
            background: #4a5568;
            border: none;
            border-radius: 6px;
            padding: 8px 16px;
            color: white;
            cursor: pointer;
            transition: background 0.3s ease;
        }

        .send-button:hover {
            background: #2d3748;
        }

        /* Video container */
        .video-container {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 240px;
            height: 180px;
            border-radius: 12px;
            overflow: hidden;
            background: rgba(0, 0, 0, 0.6);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            z-index: 1000;
            display: none; /* Başlangıçta gizli */
        }

        .video-container.active {
            display: block;
        }

        #localVideo {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        /* Media controls */
        .media-controls {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 12px;
            padding: 12px;
            background: rgba(0, 0, 0, 0.7);
            border-radius: 50px;
            z-index: 1000;
        }

        .media-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: none;
            background: #2d3748;
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .media-btn:hover {
            background: #4a5568;
        }

        .media-btn.active {
            background: #48bb78;
        }

        .media-btn.active:hover {
            background: #38a169;
        }

        .shortcut-hint {
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            white-space: nowrap;
            opacity: 0;
            transition: opacity 0.2s;
            pointer-events: none;
        }

        .media-btn:hover .shortcut-hint {
            opacity: 1;
        }
    </style>
</head>
<body class="font-sans bg-gradient-to-br from-gray-900 to-primary-900 text-white min-h-screen">
    <div class="container mx-auto px-4 py-8 flex flex-col min-h-screen">
        <!-- Header -->
        <header class="flex flex-col w-full">
            <!-- Logo and Navigation -->
            <div class="flex flex-col md:flex-row justify-between items-center py-4">
                <div class="logo flex items-center mb-4 md:mb-0">
                    <i class="fas fa-tv text-primary-500 text-4xl mr-3"></i>
                    <h1 class="text-3xl font-bold tracking-tight">WTUG</h1>
                </div>
                <nav class="w-full md:w-auto">
                    <ul class="flex justify-center md:justify-end space-x-6">
                        <li><a href="#" id="aboutButton" class="text-lg hover:text-primary-400 transition-colors"><i class="fas fa-info-circle mr-1"></i> Hakkında</a></li>
                        <li><a href="#" id="helpButton" class="text-lg hover:text-primary-400 transition-colors"><i class="fas fa-question-circle mr-1"></i> Yardım</a></li>
                    </ul>
                </nav>
            </div>

            <!-- Mobile VPN Alert -->
            <div id="vpnAlert" class="fixed bottom-0 right-0 z-50 p-4 m-4 bg-yellow-600 text-white rounded-lg shadow-lg transform translate-x-full opacity-0 transition-all duration-300 ease-in-out">
                <div class="flex items-start">
                    <div class="flex-shrink-0">
                        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path>
                        </svg>
                    </div>
                    <div class="ml-3 flex-1">
                        <p id="vpnAlertMessage" class="text-sm font-medium">VPN kullanımı tespit edildi. Ekran paylaşım performansını artırmak için VPN bağlantınızı devre dışı bırakabilirsiniz.</p>
                    </div>
                    <button id="closeVpnAlert" class="ml-4 text-white hover:text-gray-200 focus:outline-none">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
            </div>
        </header>

        <!-- Desktop VPN Alert -->
        <div id="vpnAlertDesktop" class="fixed bottom-0 right-0 z-50 max-w-md p-4 m-4 bg-yellow-600 text-white rounded-lg shadow-lg transform translate-x-full opacity-0 transition-all duration-300 ease-in-out">
            <div class="flex items-start">
                <div class="flex-shrink-0">
                    <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path>
                    </svg>
                </div>
                <div class="ml-3 flex-1">
                    <h3 class="text-lg font-medium">VPN Algılandı</h3>
                    <p id="vpnAlertDesktopMessage" class="mt-1 text-sm">VPN kullanımı tespit edildi. Ekran paylaşım performansını artırmak için VPN bağlantınızı devre dışı bırakabilirsiniz.</p>
                    <div class="mt-2">
                        <button id="closeVpnAlertDesktop" class="inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded-md shadow-sm text-yellow-600 bg-white hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-500">
                            Anladım
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <main class="flex-grow flex flex-col md:flex-row items-center justify-center py-8 md:py-16 gap-8">
            <!-- Left side: Hero text -->
            <div class="w-full md:w-1/2 text-center md:text-left space-y-6 animate-fade-in">
                <h2 class="text-4xl md:text-5xl font-bold leading-tight">Modern Ekran Paylaşımı Deneyimi</h2>
                <p class="text-lg text-gray-300">
                    WTUG, düşük gecikmeli ve yüksek kaliteli WebRTC teknolojisi ile ekran paylaşımını kolaylaştırır. Dosya yükleme, program kurma veya hesap oluşturma gerektirmez!
                </p>
                <div class="flex flex-wrap gap-4 justify-center md:justify-start">
                    <div class="feature-item bg-black/20 backdrop-blur-sm p-4 rounded-lg">
                        <i class="fas fa-bolt text-primary-400 text-xl"></i>
                        <span class="ml-2">Anında Bağlantı</span>
                    </div>
                    <div class="feature-item bg-black/20 backdrop-blur-sm p-4 rounded-lg">
                        <i class="fas fa-lock text-primary-400 text-xl"></i>
                        <span class="ml-2">Güvenli İletişim</span>
                    </div>
                    <div class="feature-item bg-black/20 backdrop-blur-sm p-4 rounded-lg">
                        <i class="fas fa-mobile-alt text-primary-400 text-xl"></i>
                        <span class="ml-2">Mobil Uyumlu</span>
                    </div>
                </div>
            </div>

            <!-- Right side: Action Card -->
            <div class="w-full md:w-1/2 max-w-md">
                <div class="bg-black/30 backdrop-blur-md rounded-xl shadow-xl p-6 md:p-8 space-y-6">
                    <h3 class="text-2xl font-semibold text-center">Ekran Paylaşımına Başla</h3>
                    <div class="space-y-4">
                        <div class="username-form" id="usernameForm">
                            <label for="username" class="block text-sm font-medium text-gray-300 mb-1">İsminiz</label>
                            <div class="relative">
                                <span class="absolute inset-y-0 left-0 flex items-center pl-3">
                                    <i class="fas fa-user text-gray-400"></i>
                                </span>
                                <input type="text" id="username" placeholder="İsminizi girin" 
                                    class="w-full py-3 pl-10 pr-4 bg-black/50 text-white placeholder-gray-500 border border-gray-700 rounded-lg focus:outline-none focus:border-primary-500">
                            </div>
                        </div>

                        <div class="tabs flex rounded-lg bg-black/50 p-1">
                            <button id="createRoomTab" class="tab flex-1 py-2 rounded-lg bg-primary-600 text-white">
                                <i class="fas fa-plus-circle mr-2"></i> Oda Oluştur
                            </button>
                            <button id="joinRoomTab" class="tab flex-1 py-2 text-gray-300">
                                <i class="fas fa-sign-in-alt mr-2"></i> Odaya Katıl
                            </button>
                        </div>

                        <div id="createRoomPanel">
                            <div class="space-y-4">
                                <div>
                                    <label for="customRoomId" class="block text-sm font-medium text-gray-300 mb-1">Oda ID (İsteğe Bağlı)</label>
                                    <div class="relative">
                                        <span class="absolute inset-y-0 left-0 flex items-center pl-3">
                                            <i class="fas fa-hashtag text-gray-400"></i>
                                        </span>
                                        <input type="text" id="customRoomId" placeholder="Özel oda ID'si" 
                                            class="w-full py-3 pl-10 pr-4 bg-black/50 text-white placeholder-gray-500 border border-gray-700 rounded-lg focus:outline-none focus:border-primary-500">
                                    </div>
                                    <p class="text-xs text-gray-500 mt-1">Boş bırakırsanız rastgele ID oluşturulacaktır.</p>
                                </div>
                                <button id="createRoomBtn" class="w-full py-3 bg-primary-600 hover:bg-primary-700 text-white rounded-lg transition-colors font-medium">
                                    <i class="fas fa-video mr-2"></i> Oda Oluştur
                                </button>
                            </div>
                        </div>

                        <div id="joinRoomPanel" class="hidden">
                            <div class="space-y-4">
                                <div>
                                    <label for="roomIdToJoin" class="block text-sm font-medium text-gray-300 mb-1">Oda ID</label>
                                    <div class="relative">
                                        <span class="absolute inset-y-0 left-0 flex items-center pl-3">
                                            <i class="fas fa-hashtag text-gray-400"></i>
                                        </span>
                                        <input type="text" id="roomIdToJoin" placeholder="Katılmak istediğiniz oda ID'si" 
                                            class="w-full py-3 pl-10 pr-4 bg-black/50 text-white placeholder-gray-500 border border-gray-700 rounded-lg focus:outline-none focus:border-primary-500">
                                    </div>
                                </div>
                                <button id="joinRoomBtn" class="w-full py-3 bg-primary-600 hover:bg-primary-700 text-white rounded-lg transition-colors font-medium">
                                    <i class="fas fa-sign-in-alt mr-2"></i> Odaya Katıl
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Footer -->
        <footer class="py-4 text-center text-gray-500 text-sm">
            <p>&copy; 2025 WTUG. Tüm hakları saklıdır.</p>
            <div class="flex justify-center space-x-4 mt-2">
                <a href="https://github.com/gencergoktug0758" class="hover:text-white transition-colors" target="_blank"><i class="fab fa-github"></i></a>
                <a href="#" class="hover:text-white transition-colors"><i class="fab fa-twitter"></i></a>
                <a href="#" class="hover:text-white transition-colors"><i class="fab fa-linkedin"></i></a>
            </div>
        </footer>

        <!-- Toast notifications -->
        <div id="toast" class="fixed bottom-4 right-4 bg-primary-600 text-white px-6 py-3 rounded-lg shadow-lg hidden items-center">
            <span id="toastMessage"></span>
            <button id="closeToast" class="ml-3 text-white focus:outline-none">
                <i class="fas fa-times"></i>
            </button>
        </div>

        <!-- Help Modal -->
        <div id="helpModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50 modal-overlay">
            <div class="bg-gray-900 rounded-xl shadow-2xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto modal-content">
                <div class="p-6">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold text-primary-400">WTUG Kullanım Kılavuzu</h2>
                        <button id="closeHelpModal" class="text-gray-400 hover:text-white transition-colors">
                            <i class="fas fa-times text-xl"></i>
                        </button>
                    </div>
                    
                    <div class="space-y-8">
                        <!-- Oda Oluşturma Bölümü -->
                        <div class="bg-black/30 rounded-lg p-6">
                            <h3 class="text-xl font-semibold mb-4 text-primary-300">
                                <i class="fas fa-plus-circle mr-2"></i>Oda Oluşturma
                            </h3>
                            <div class="space-y-4">
                                <p class="text-gray-300">Oda oluşturmak için aşağıdaki adımları takip edin:</p>
                                <ol class="list-decimal list-inside space-y-2 text-gray-300">
                                    <li>İlk olarak, üst kısımdaki "İsminiz" alanına kullanıcı adınızı girin.</li>
                                    <li>Ardından, "Oda Oluştur" sekmesini seçin.</li>
                                    <li>İsterseniz "Oda ID" alanına özel bir ID girebilirsiniz (opsiyonel).</li>
                                    <li>Son olarak "Oda Oluştur" butonuna tıklayın.</li>
                                </ol>
                                <div class="bg-primary-900/30 p-4 rounded-lg mt-4">
                                    <p class="text-primary-200"><i class="fas fa-lightbulb mr-2"></i>İpucu: Özel bir ID girmezseniz, sistem otomatik olarak benzersiz bir ID oluşturacaktır.</p>
                                </div>
                            </div>
                        </div>

                        <!-- Odaya Katılma Bölümü -->
                        <div class="bg-black/30 rounded-lg p-6">
                            <h3 class="text-xl font-semibold mb-4 text-primary-300">
                                <i class="fas fa-sign-in-alt mr-2"></i>Odaya Katılma
                            </h3>
                            <div class="space-y-4">
                                <p class="text-gray-300">Var olan bir odaya katılmak için:</p>
                                <ol class="list-decimal list-inside space-y-2 text-gray-300">
                                    <li>İsminizi girin.</li>
                                    <li>"Odaya Katıl" sekmesini seçin.</li>
                                    <li>Size verilen Oda ID'sini girin.</li>
                                    <li>"Odaya Katıl" butonuna tıklayın.</li>
                                </ol>
                            </div>
                        </div>

                        <!-- Ekran Paylaşımı Bölümü -->
                        <div class="bg-black/30 rounded-lg p-6">
                            <h3 class="text-xl font-semibold mb-4 text-primary-300">
                                <i class="fas fa-desktop mr-2"></i>Ekran Paylaşımı
                            </h3>
                            <div class="space-y-4">
                                <p class="text-gray-300">Ekran paylaşımı yapmak için:</p>
                                <ol class="list-decimal list-inside space-y-2 text-gray-300">
                                    <li>Odaya katıldıktan sonra "Ekranı Paylaş" butonuna tıklayın.</li>
                                    <li>Paylaşmak istediğiniz ekranı veya pencereyi seçin.</li>
                                    <li>Paylaşımı durdurmak için "Paylaşımı Durdur" butonunu kullanın.</li>
                                </ol>
                                <div class="bg-primary-900/30 p-4 rounded-lg mt-4">
                                    <p class="text-primary-200"><i class="fas fa-info-circle mr-2"></i>Not: Ekran paylaşımı sırasında tarayıcınızın izin istemesine izin verin.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- About Modal -->
        <div id="aboutModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50 modal-overlay">
            <div class="bg-gray-900 rounded-xl shadow-2xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto modal-content">
                <div class="p-6">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold text-primary-400">WTUG Hakkında</h2>
                        <button id="closeAboutModal" class="text-gray-400 hover:text-white transition-colors">
                            <i class="fas fa-times text-xl"></i>
                        </button>
                    </div>
                    
                    <div class="space-y-8">
                        <!-- Genel Bilgi -->
                        <div class="bg-black/30 rounded-lg p-6">
                            <h3 class="text-xl font-semibold mb-4 text-primary-300">
                                <i class="fas fa-star mr-2"></i>Genel Bilgi
                            </h3>
                            <div class="space-y-4">
                                <p class="text-gray-300">
                                    WTUG, modern ve kullanıcı dostu bir ekran paylaşım platformudur. WebRTC teknolojisi sayesinde düşük gecikmeli ve yüksek kaliteli ekran paylaşımı deneyimi sunar.
                                </p>
                                <div class="bg-primary-900/30 p-4 rounded-lg">
                                    <p class="text-primary-200">
                                        <i class="fas fa-check-circle mr-2"></i>Hesap oluşturma veya program kurma gerektirmez
                                    </p>
                                </div>
                            </div>
                        </div>

                        <!-- Özellikler -->
                        <div class="bg-black/30 rounded-lg p-6">
                            <h3 class="text-xl font-semibold mb-4 text-primary-300">
                                <i class="fas fa-list-check mr-2"></i>Özellikler
                            </h3>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div class="flex items-start space-x-3">
                                    <i class="fas fa-bolt text-primary-400 mt-1"></i>
                                    <div>
                                        <h4 class="font-medium text-white">Anında Bağlantı</h4>
                                        <p class="text-gray-400 text-sm">Saniyeler içinde ekran paylaşımına başlayın</p>
                                    </div>
                                </div>
                                <div class="flex items-start space-x-3">
                                    <i class="fas fa-lock text-primary-400 mt-1"></i>
                                    <div>
                                        <h4 class="font-medium text-white">Güvenli İletişim</h4>
                                        <p class="text-gray-400 text-sm">Uçtan uca şifreli bağlantı</p>
                                    </div>
                                </div>
                                <div class="flex items-start space-x-3">
                                    <i class="fas fa-mobile-alt text-primary-400 mt-1"></i>
                                    <div>
                                        <h4 class="font-medium text-white">Mobil Uyumlu</h4>
                                        <p class="text-gray-400 text-sm">Tüm cihazlardan erişim</p>
                                    </div>
                                </div>
                                <div class="flex items-start space-x-3">
                                    <i class="fas fa-code text-primary-400 mt-1"></i>
                                    <div>
                                        <h4 class="font-medium text-white">Modern Teknoloji</h4>
                                        <p class="text-gray-400 text-sm">WebRTC ve Socket.IO altyapısı</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Kullanım Alanları -->
                        <div class="bg-black/30 rounded-lg p-6">
                            <h3 class="text-xl font-semibold mb-4 text-primary-300">
                                <i class="fas fa-lightbulb mr-2"></i>Kullanım Alanları
                            </h3>
                            <div class="space-y-4">
                                <ul class="list-disc list-inside space-y-2 text-gray-300">
                                    <li>Uzaktan eğitim ve ders anlatımı</li>
                                    <li>Uzaktan teknik destek</li>
                                    <li>Takım çalışmaları ve proje paylaşımları</li>
                                    <li>Canlı sunumlar ve gösterimler</li>
                                    <li>Oyun yayınları ve eğlence</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Loading Screen -->
        <div id="loadingScreen" class="fixed inset-0 bg-gray-900 bg-opacity-95 hidden items-center justify-center z-50 loading-screen">
            <div class="text-center">
                <div class="relative flex items-center justify-center mb-8">
                    <div class="loading-pulse"></div>
                    <div class="loading-icon"></div>
                </div>
                <h2 class="text-2xl font-semibold text-white mb-4 loading-text">
                    <span>O</span>
                    <span>d</span>
                    <span>a</span>
                    <span>&nbsp;</span>
                    <span>o</span>
                    <span>l</span>
                    <span>u</span>
                    <span>ş</span>
                    <span>t</span>
                    <span>u</span>
                    <span>r</span>
                    <span>u</span>
                    <span>l</span>
                    <span>u</span>
                    <span>y</span>
                    <span>o</span>
                    <span>r</span>
                    <span>.</span>
                    <span>.</span>
                    <span>.</span>
                </h2>
                <p class="text-gray-400" id="loadingMessage">Bağlanılıyor</p>
            </div>
        </div>

        <!-- Video container -->
        <div class="video-container" id="videoContainer">
            <video id="localVideo" autoplay muted playsinline></video>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
    <script src="js/main.js"></script>
    <script>
        // Help Modal functionality
        const helpModal = document.getElementById('helpModal');
        const helpButton = document.getElementById('helpButton');
        const closeHelpModal = document.getElementById('closeHelpModal');

        helpButton.addEventListener('click', () => {
            helpModal.classList.remove('hidden');
            helpModal.classList.add('flex');
        });

        closeHelpModal.addEventListener('click', () => {
            helpModal.classList.add('hidden');
            helpModal.classList.remove('flex');
        });

        // Close modal when clicking outside
        helpModal.addEventListener('click', (e) => {
            if (e.target === helpModal) {
                helpModal.classList.add('hidden');
                helpModal.classList.remove('flex');
            }
        });

        // About Modal functionality
        const aboutModal = document.getElementById('aboutModal');
        const aboutButton = document.getElementById('aboutButton');
        const closeAboutModal = document.getElementById('closeAboutModal');

        aboutButton.addEventListener('click', () => {
            aboutModal.classList.remove('hidden');
            aboutModal.classList.add('flex');
        });

        closeAboutModal.addEventListener('click', () => {
            aboutModal.classList.add('hidden');
            aboutModal.classList.remove('flex');
        });

        // Close modal when clicking outside
        aboutModal.addEventListener('click', (e) => {
            if (e.target === aboutModal) {
                aboutModal.classList.add('hidden');
                aboutModal.classList.remove('flex');
            }
        });

        // Küfür ve uygunsuz kelime kontrolü
        const blockedWords = [
            'amk', 'aq', 'sg', 'oç', 'piç', 'yavşak', 'amına', 'sikerim', 'sikim', 'amcık', 'amcik',
            'ananısikim', 'ananisikim', 'anan', 'sikeyim', 'sikik', 'amq', 'amcık', 'amcik', 'amına koyayım',
            'amina koyayim', 'amına koyim', 'amina koyim', 'amk', 'aq', 'sg', 'oç', 'piç', 'yavşak',
            'amına', 'sikerim', 'sikim', 'amcık', 'amcik', 'ananısikim', 'ananisikim', 'anan', 'sikeyim',
            'sikik', 'amq', 'amcık', 'amcik', 'amına koyayım', 'amina koyayim', 'amına koyim', 'amina koyim',
            'am', 'mk', 'aq', 'sg', 'oc', 'pic', 'yavşak', 'amina', 'sikerim', 'sikim', 'amcik', 'amcık',
            'ananisikim', 'ananısikim', 'anan', 'sikeyim', 'sikik', 'amq', 'amcik', 'amcık', 'amina koyayim',
            'amına koyayım', 'amina koyim', 'amına koyim', 'amk', 'aq', 'sg', 'oc', 'pic', 'yavşak',
            'amina', 'sikerim', 'sikim', 'amcik', 'amcık', 'ananisikim', 'ananısikim', 'anan', 'sikeyim',
            'sikik', 'amq', 'amcik', 'amcık', 'amina koyayim', 'amına koyayım', 'amina koyim', 'amına koyim'
        ];

        function containsBlockedWords(text) {
            const lowerText = text.toLowerCase();
            // Boşlukları kaldır ve noktalama işaretlerini temizle
            const cleanText = lowerText.replace(/[.,\/#!$%\^&\*;:{}=\-_`~()]/g, '').replace(/\s+/g, '');
            return blockedWords.some(word => {
                const cleanWord = word.replace(/\s+/g, '');
                return cleanText.includes(cleanWord);
            });
        }

        // Oda ID ve kullanıcı adı kontrolleri
        const usernameInput = document.getElementById('username');
        const customRoomIdInput = document.getElementById('customRoomId');
        const roomIdToJoinInput = document.getElementById('roomIdToJoin');
        const createRoomBtn = document.getElementById('createRoomBtn');
        const joinRoomBtn = document.getElementById('joinRoomBtn');

        function showToast(message, isError = false) {
            const toast = document.getElementById('toast');
            const toastMessage = document.getElementById('toastMessage');
            toastMessage.textContent = message;
            toast.classList.remove('hidden', 'bg-primary-600', 'bg-red-600');
            toast.classList.add(isError ? 'bg-red-600' : 'bg-primary-600', 'flex');
            setTimeout(() => {
                toast.classList.add('hidden');
            }, 3000);
        }

        // Input değerlerini temizle ve kontrol et
        function sanitizeInput(input) {
            return input.trim().replace(/[.,\/#!$%\^&\*;:{}=\-_`~()]/g, '');
        }

        // Oda oluşturma kontrolü
        createRoomBtn.addEventListener('click', (e) => {
            e.preventDefault();
            const username = sanitizeInput(usernameInput.value);
            const roomId = sanitizeInput(customRoomIdInput.value);

            if (!username) {
                showToast('Lütfen bir kullanıcı adı girin.', true);
                return;
            }

            if (containsBlockedWords(username)) {
                showToast('Kullanıcı adında uygunsuz kelimeler bulunamaz.', true);
                usernameInput.value = '';
                return;
            }

            if (roomId && roomId.length < 3) {
                showToast('Oda ID en az 3 karakter olmalıdır.', true);
                customRoomIdInput.value = '';
                return;
            }

            if (roomId && containsBlockedWords(roomId)) {
                showToast('Oda ID\'sinde uygunsuz kelimeler bulunamaz.', true);
                customRoomIdInput.value = '';
                return;
            }

            // Eğer tüm kontroller başarılıysa, oda oluşturma işlemine devam et
            // Burada mevcut oda oluşturma kodunuz çalışacak
        });

        // Odaya katılma kontrolü
        joinRoomBtn.addEventListener('click', (e) => {
            e.preventDefault();
            const username = sanitizeInput(usernameInput.value);
            const roomId = sanitizeInput(roomIdToJoinInput.value);

            if (!username) {
                showToast('Lütfen bir kullanıcı adı girin.', true);
                return;
            }

            if (containsBlockedWords(username)) {
                showToast('Kullanıcı adında uygunsuz kelimeler bulunamaz.', true);
                usernameInput.value = '';
                return;
            }

            if (!roomId) {
                showToast('Lütfen bir oda ID girin.', true);
                return;
            }

            if (roomId.length < 3) {
                showToast('Oda ID en az 3 karakter olmalıdır.', true);
                roomIdToJoinInput.value = '';
                return;
            }

            if (containsBlockedWords(roomId)) {
                showToast('Oda ID\'sinde uygunsuz kelimeler bulunamaz.', true);
                roomIdToJoinInput.value = '';
                return;
            }

            // Eğer tüm kontroller başarılıysa, odaya katılma işlemine devam et
            // Burada mevcut odaya katılma kodunuz çalışacak
        });

        // Input alanlarında anlık kontrol
        usernameInput.addEventListener('input', function() {
            const value = sanitizeInput(this.value);
            if (containsBlockedWords(value)) {
                this.classList.add('border-red-500');
                showToast('Kullanıcı adında uygunsuz kelimeler bulunamaz.', true);
                this.value = '';
            } else {
                this.classList.remove('border-red-500');
            }
        });

        customRoomIdInput.addEventListener('input', function() {
            const value = sanitizeInput(this.value);
            if (value.length > 0 && value.length < 3) {
                this.classList.add('border-red-500');
                showToast('Oda ID en az 3 karakter olmalıdır.', true);
                this.value = '';
            } else if (containsBlockedWords(value)) {
                this.classList.add('border-red-500');
                showToast('Oda ID\'sinde uygunsuz kelimeler bulunamaz.', true);
                this.value = '';
            } else {
                this.classList.remove('border-red-500');
            }
        });

        roomIdToJoinInput.addEventListener('input', function() {
            const value = sanitizeInput(this.value);
            if (value.length > 0 && value.length < 3) {
                this.classList.add('border-red-500');
                showToast('Oda ID en az 3 karakter olmalıdır.', true);
                this.value = '';
            } else if (containsBlockedWords(value)) {
                this.classList.add('border-red-500');
                showToast('Oda ID\'sinde uygunsuz kelimeler bulunamaz.', true);
                this.value = '';
            } else {
                this.classList.remove('border-red-500');
            }
        });

        // Emoji picker implementation
        const emojiButton = document.getElementById('emoji-button');
        const messageInput = document.getElementById('message-input');

        // Emoji picker'ı oluştur
        const picker = new picmo.createPopup({
            rootElement: document.body,
            theme: 'dark',
            showPreview: true,
            showRecents: true,
            showSearch: true,
            showCategoryTabs: true,
            position: 'bottom-start',
            visibleRows: 5,
        }, {
            referenceElement: emojiButton,
            triggerElement: emojiButton,
        });

        // Emoji seçildiğinde
        picker.addEventListener('emoji:select', event => {
            const cursorPos = messageInput.selectionStart;
            const textBeforeCursor = messageInput.value.substring(0, cursorPos);
            const textAfterCursor = messageInput.value.substring(cursorPos);
            
            messageInput.value = textBeforeCursor + event.emoji + textAfterCursor;
            messageInput.focus();
            
            const newCursorPos = cursorPos + event.emoji.length;
            messageInput.setSelectionRange(newCursorPos, newCursorPos);
        });

        // Emoji butonuna tıklandığında
        emojiButton.addEventListener('click', () => {
            picker.toggle();
        });

        // Enter tuşuna basıldığında mesaj gönder
        messageInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                sendMessage();
            }
        });

        // Mesaj gönderme fonksiyonu
        function sendMessage() {
            const message = messageInput.value.trim();
            if (message) {
                socket.emit('chat-message', {
                    roomId,
                    message: message
                });
                messageInput.value = '';
                messageInput.focus();
            }
        }

        // WebRTC bağlantısı için değişkenler
        let peerConnections = {};
        let localStream = null;
        let screenStream = null;
        let audioStream = null;
        let videoStream = null;
        let isSharing = false;
        let hasAudio = false;
        let hasVideo = false;
        
        // Medya kontrol değişkenleri
        let isAudioEnabled = false;
        let isVideoEnabled = false;
        let mediaStream = null;
        let audioTrack = null;
        let videoTrack = null;
        
        // DOM elementleri
        const videoContainer = document.getElementById('videoContainer');
        const localVideo = document.getElementById('localVideo');
        const mediaControls = document.getElementById('mediaControls');
        const toggleMicBtn = document.getElementById('toggleMic');
        const toggleCamBtn = document.getElementById('toggleCam');
        
        // Klavye kısayolları
        document.addEventListener('keydown', (e) => {
            // Ctrl + M: Mikrofon toggle
            if (e.ctrlKey && e.key.toLowerCase() === 'm') {
                e.preventDefault();
                toggleAudio();
            }
            // Ctrl + V: Kamera toggle
            if (e.ctrlKey && e.key.toLowerCase() === 'v') {
                e.preventDefault();
                toggleVideo();
            }
        });
        
        // Mikrofon kontrolü
        async function toggleAudio() {
            try {
                if (!mediaStream) {
                    mediaStream = await navigator.mediaDevices.getUserMedia({ audio: true });
                }
                
                if (!audioTrack) {
                    audioTrack = mediaStream.getAudioTracks()[0];
                }
                
                if (audioTrack) {
                    isAudioEnabled = !isAudioEnabled;
                    audioTrack.enabled = isAudioEnabled;
                    toggleMicBtn.classList.toggle('active', isAudioEnabled);
                    toggleMicBtn.querySelector('i').className = isAudioEnabled ? 'fas fa-microphone' : 'fas fa-microphone-slash';
                    
                    // Ekran paylaşımı yapılıyorsa ses durumunu güncelle
                    if (isSharing && roomId) {
                        socket.emit('media-state-change', {
                            roomId,
                            hasAudio: isAudioEnabled,
                            hasVideo: isVideoEnabled
                        });
                    }
                }
            } catch (error) {
                console.error('Mikrofon erişim hatası:', error);
                showToast('Mikrofon erişimi sağlanamadı.', true);
            }
        }
        
        // Kamera kontrolü
        async function toggleVideo() {
            try {
                if (!mediaStream) {
                    mediaStream = await navigator.mediaDevices.getUserMedia({ video: true });
                }
                
                if (!videoTrack) {
                    videoTrack = mediaStream.getVideoTracks()[0];
                }
                
                if (videoTrack) {
                    isVideoEnabled = !isVideoEnabled;
                    videoTrack.enabled = isVideoEnabled;
                    toggleCamBtn.classList.toggle('active', isVideoEnabled);
                    toggleCamBtn.querySelector('i').className = isVideoEnabled ? 'fas fa-video' : 'fas fa-video-slash';
                    
                    // Video container'ı göster/gizle
                    videoContainer.classList.toggle('active', isVideoEnabled);
                    
                    // Video stream'i güncelle
                    if (isVideoEnabled) {
                        localVideo.srcObject = mediaStream;
                        await localVideo.play();
                    } else {
                        localVideo.srcObject = null;
                    }
                    
                    // Ekran paylaşımı yapılıyorsa video durumunu güncelle
                    if (isSharing && roomId) {
                        socket.emit('media-state-change', {
                            roomId,
                            hasAudio: isAudioEnabled,
                            hasVideo: isVideoEnabled
                        });
                    }
                }
            } catch (error) {
                console.error('Kamera erişim hatası:', error);
                showToast('Kamera erişimi sağlanamadı.', true);
            }
        }
        
        // Ekran paylaşımı başladığında medya kontrollerini göster
        function showMediaControls() {
            mediaControls.style.display = 'flex';
        }
        
        // Ekran paylaşımı durduğunda medya kontrollerini ve video container'ı gizle
        function hideMediaControls() {
            mediaControls.style.display = 'none';
            videoContainer.classList.remove('active');
            if (mediaStream) {
                mediaStream.getTracks().forEach(track => track.stop());
            }
            mediaStream = null;
            audioTrack = null;
            videoTrack = null;
            isAudioEnabled = false;
            isVideoEnabled = false;
            toggleMicBtn.classList.remove('active');
            toggleCamBtn.classList.remove('active');
        }
        
        // Ekran paylaşımı başlatma fonksiyonunu güncelle
        async function startSharing() {
            try {
                const screenStream = await navigator.mediaDevices.getDisplayMedia({
                    video: true,
                    audio: true
                });
                
                isSharing = true;
                showMediaControls();
                
                // Ekran paylaşımı stream'ini ayarla
                const screenVideo = document.getElementById('screenVideo');
                screenVideo.srcObject = screenStream;
                await screenVideo.play();
                
                // Diğer kullanıcılara bildir
                socket.emit('start-sharing', {
                    roomId,
                    hasAudio: isAudioEnabled,
                    hasVideo: isVideoEnabled
                });
                
                // Stream durduğunda
                screenStream.getVideoTracks()[0].onended = () => {
                    stopSharing();
                    hideMediaControls();
                };
                
            } catch (error) {
                console.error('Ekran paylaşımı hatası:', error);
                showToast('Ekran paylaşımı başlatılamadı.', true);
            }
        }
        
        // Ekran paylaşımını durdurma fonksiyonunu güncelle
        function stopSharing() {
            if (isSharing) {
                isSharing = false;
                hideMediaControls();
                
                const screenVideo = document.getElementById('screenVideo');
                if (screenVideo.srcObject) {
                    screenVideo.srcObject.getTracks().forEach(track => track.stop());
                    screenVideo.srcObject = null;
                }
                
                socket.emit('stop-sharing', roomId);
            }
        }
    </script>
</body>
</html> 